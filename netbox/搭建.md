> [3. NetBox - NetBox OSS](https://netboxlabs.com/docs/netbox/en/stable/installation/3-netbox/#__tabbed_3_2)
>官网
# 环境

| 依赖         | 版本             |
| ---------- | -------------- |
| python     | 3.10、3.11、3.12 |
| PostgreSQL | 12+            |
| Redis      | 4.0+           |
> 此文档环境版本为：
> python3.12
> Postgresql17
> Redis5
# python
### 版本
1.安装3.10或以上版本
```bash
dnf install python3.12  
```
2.设置安装的python高版本为<mark>默认版本</mark>
```bash
alternatives --set python3 /usr/bin/python3.12
```

---
# Redis

> [Redis下载](https://www.redis.net.cn/download/)
### 配置redis服务
###### 1、在/etc/systemd/system下创建redis.service文件。
###### 2、redis.service文件中写入配置
```shell
[Unit]
Description=redis
After=network.target

[Service]
ExecStart=/bin/sh -c 'src/redis-server'
Restart=always
User=root
Group=root
WorkingDirectory=        （没有空格只是隔开）reids所在目录

[Install]
WantedBy=multi-user.target
~
```
###### 3、开启服务
```shell
systemctl start redis
```
###### 4、开机自启
```bash
systemctl enable redis
```
---
# Postgresql

> [PostgreSQL: Downloads](https://www.postgresql.org/download/)

---
# 搭建
### 1、下载或git拉取
> [GitHub - netbox-community/netbox: The premier source of truth powering network automation. Open source under Apache 2. Try NetBox Cloud free: https://netboxlabs.com/free-netbox-cloud/](https://github.com/netbox-community/netbox)

1.下载：wget ，*.tar.gz文件到创建的目录并解压出来

2.git：git项目仓库到创建的目录

### 2、创建netbox系统用户并将文件赋予权限
```bash
groupadd --system netbox
adduser --system -g netbox netbox
chown -R netbox 路径为netbox中的nenetbox下的media
chown -R netbox 路径为netbox中的nenetbox下的reports
chown -R netbox 路径为netbox中的nenetbox下的scripts
```
### 3、配置
1、复制文件，*.py文件在里层的netbox中
```bash
cd netbox/netbox/netbox
cp configuration_example.py configuration.py
```
2、编辑文件configuration.py，新安装只需要配置一下四项
- `ALLOWED_HOSTS`：此项为设置可访问的主机，以防恶意访问
1. 配置可访问的主机，主机之间英文逗号隔开
		`ALLOWED_HOSTS = ['ip\域名' ,'ip\域名']`
2. 无限制访问
		`ALLOWED_HOSTS = ['*']`
- `DATABASE`：PostgreSQL数据库配置
```
DATABASE = { 
		'NAME': 'netbox',                # 数据库名
		'USER': 'netbox',                # PostgreSQL 用户名 
		'PASSWORD': 'J5brHrAXFLQSif0K',  # PostgreSQL 密码 
		'HOST': 'localhost',             # Database 主机名\IP
		'PORT': '',                      # Database 端口 （默认留空） 
		'CONN_MAX_AGE': 300,             # 数据库最大连接时间 (单位：秒) 
		}
```
- `REDIS`
- `SECRET_KEY`


