# 硬盘分区：MBR、GPT

## MBR：为传统分区方案

> 仅支持BIOS启动，良好的兼容性适应大部分系统。
> 
> 分区最大2TB。
> 
> 无冗余校验。引导易损，导致无法启动。

### 主分区

特点：最多只能<mark>4</mark>个主分区。其中一个可设置为活动分区，用于引导系统。主分区可直接格式化为文件系统并挂载

作用：引导启动操作系统，存放操作系统的启动或引导程序，/boot分区尽量放在主分区上

### 扩展分区

特点：最多只有<mark>1</mark>个扩展分区。为突破主分区的数量限制

作用：不可存储数据，仅作为逻辑分区的载体。有自己的分区表用于管理逻辑分区

### 逻辑分区

特点：是扩展分区内的分区，理论上没有数量限制。仅在MBR分区表中有效，不可将系统安装在逻辑分区上。必须位于扩展分区内，若扩展分区损坏则所有的逻辑分区皆受影响

作用：存储数据。以扩展分区载体基础，**只存储数据不能引导启动系统**。

---

## GPT：为现代分区方案

> 支持UEFI启动，也支持BIOS但是需要win10等新系统，在BIOS引导上使用GPT时仅作为数据盘而无法引导启动。
> 
> 最多128个分区，分区最大18EB。
> 
> 使用CRC32校验，支持数据冗余和恢复。

### 各个分区之间平等，使用GUID进行标识

---

### 分区编号

###### MBR

1. 主分区
   
   编号为1到4，若4个主分区都使用则无法创建主分区，例如
   
   - `/dev/sda1`（第一个主分区）
   - `/dev/sda2`（第二个主分区）
   - `/dev/sda3`（第三个主分区）
   - `/dev/sda4`（第四个主分区）

2. 扩展、逻辑分区
   
   - 扩展分区本身占用一个主分区编号（例如`/dev/sda4`）。
   - 逻辑分区的编号从5开始，例如：
     - `/dev/sda5`（第一个逻辑分区）
     - `/dev/sda6`（第二个逻辑分区）
     - `/dev/sda7`（第三个逻辑分区）
   - 逻辑分区的编号可以无限增加（实际受操作系统限制）。

###### GPT

- GPT分区表支持最多128个主分区（具体数量可能因操作系统而异）。
- 分区编号从1开始，例如：
  - `/dev/sda1`（第一个主分区）
  - `/dev/sda2`（第二个主分区）
  - `/dev/sda3`（第三个主分区）
- 分区编号可以连续分配，直到达到最大分区数量。

---

# Linux系统中的硬盘

> linux系统中使硬盘可用的大概步骤为：分区---格式化----创建挂载点-----挂载

### 命名方式：/dev/sd（a-z）数字

    /dev，表示在dev目录下，dev目录存放设备文件（如硬盘、U盘、光驱等），这些文件是操作系统与硬件交互的接口

    a-z，表示设备序号，如sda为第一块盘，sdb为第二块等等

        注意：第26磁盘：sdz 第27块磁盘：sdaa 第28块磁盘：sdab

    n，表示分区编号

### 查看块设备（硬盘、分区、挂载点等）

```shell
lsblk
```

###### 常用参数

- `-f`显示文件系统、UUID、挂载点等

- `-a`显示所有设备，包括空设备

- `-m`显示设备所有者及所有者信息

- `-l`以树状结构显示

### 管理磁盘分区

```shell
fdisk 参数  设备名
```

此命令会进入交互式命令行

###### 1.查看分区表：`p`

```shell
Command (m for help): p
```

###### 2.创建新分区：`n`

```shell
Command (m for help): n
```

- 选择分区类型（主分区 `p` 或扩展分区 `e`）。
- 设置分区编号、起始扇区和结束扇区。

> 创建分区步骤：输入`n`后，选择`p`或`e`，选择为主分区/扩展分区

1. 选择分区号，主分区为（1-4），，逻辑分区从5开始（1到4保留给主分区不使用）

2. 设置起始扇区，此处回车默认即可

3. 设置结束扇区，此处输入`+需要的容量`即可。此处亦可回车则将剩余空间全部分配

###### 3.删除分区：`d`

```shell
Command (m for help): d
```

###### 4.查看帮助：`m`

```shell
Command (m for help): m
```

###### 5.保存并退出：`w`

```shell
Command (m for help): w
```

###### 6. 放弃更改并退出：`q`

```shell
Command (m for help): q
```

---

### 更改文件系统

```shell
mkfs 选项 设备名
```

将一个分区或磁盘格式化为特定的文件系统（ext4、xfs等）

#### 用法

1.直接指定某文件系统进行格式化，输入`mkfs`查询

```shell
mkfs.文件系统 设备名
```

**2.选项指定**

```shell
mkfs -t 文件类型 设备名
```

**3.强制指定**

```shell
mkfs.文件系统 -f 设备名
```

---

### 挂载

**1.创建挂载点**

    创建目录

**2.挂载**

```shell
mount /硬盘分区 挂载的目录位置
```

**3.查看挂载**

```shell
df -h
```
